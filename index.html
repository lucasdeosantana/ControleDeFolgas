
<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <title>GestÃ£o de FÃ©rias e Folgas â€” MEF L9C (Teste)</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <style>
    :root { --bg:#0f172a; --panel:#111827; --text:#e5e7eb; --muted:#9ca3af; --accent:#38bdf8; --vac:#22c55e33; --folga:#f59e0b33; --border:#374151; --danger:#ef4444; }
    body { margin:0; background:var(--bg); color:var(--text); font-family:system-ui,-apple-system,Segoe UI,Roboto,sans-serif; }
    header { display:flex; justify-content:space-between; align-items:center; gap:12px; padding:16px; background:var(--panel); border-bottom:1px solid var(--border); position:sticky; top:0; z-index:10; }
    .left { display:flex; gap:12px; align-items:center; flex-wrap:wrap; }
    .right { display:flex; gap:8px; align-items:center; }
    select,button,input { background:#1f2937; color:var(--text); border:1px solid var(--border); padding:8px 10px; border-radius:6px; }
    button.accent { border-color:var(--accent); }
    a.link { color:var(--accent); text-decoration:none; border:1px solid var(--accent); padding:6px 10px; border-radius:6px; }
    main { padding:12px; }
    .legend { display:flex; gap:16px; color:var(--muted); margin-bottom:12px; }
    .grid-container { background:var(--panel); border:1px solid var(--border); border-radius:8px; overflow:auto; max-height:calc(100vh - 220px); }
    table { border-collapse:separate; border-spacing:0; width:100%; min-width:800px; }
    thead th { position:sticky; top:0; background:#0b1220; border-bottom:1px solid var(--border); z-index:5; padding:6px; font-size:12px; }
    tbody td, tbody th { border-bottom:1px solid var(--border); padding:5px 6px; white-space:nowrap; }
    tbody tr:hover td { background:#0d1b2a; }
    .name-col { position:sticky; left:0; background:#0b1220; border-right:1px solid var(--border); z-index:4; min-width:220px; font-weight:500; }
    .week-col { min-width:56px; text-align:center; cursor:pointer; border-right:1px solid var(--border); }
    .week-header { font-size:10px; color:var(--muted); }
    .cell-vac { background:var(--vac); outline:1px solid #22c55e66; }

    .weekly { margin-top:16px; display:none; gap:12px; }
    .weekly.active { display:grid; }
    .weekly-header { display:flex; justify-content:space-between; align-items:center; background:var(--panel); border:1px solid var(--border); border-radius:8px; padding:12px; }
    .week-days { display:grid; grid-template-columns:1fr; gap:8px; }
    @media (min-width:900px){ .week-days { grid-template-columns:repeat(7,1fr); } }
    .day-card { background:var(--panel); border:1px solid var(--border); border-radius:8px; padding:8px; }
    .day-card h4 { margin:0 0 8px; font-size:14px; color:var(--muted); }
    .day-metrics { font-size:12px; color:var(--muted); margin-bottom:8px; display:grid; gap:4px; }
    .row { display:flex; justify-content:space-between; }

    .person { display:flex; justify-content:space-between; align-items:center; gap:8px; padding:6px 8px; border-radius:6px; margin-bottom:6px; background:#0b1220; border:1px solid var(--border); }
    .badge { font-size:12px; padding:2px 6px; border-radius:999px; border:1px solid var(--border); color:var(--muted); line-height:1.2; }
    .badge.folga { background:var(--folga); color:#fbbf24; border-color:#f59e0b99; }
    .badge.vac { background:var(--vac); color:#86efac; border-color:#22c55e99; }

    /* BotÃµes mini proporcionais ao badge */
    .btn-mini {
      font-size:12px; padding:2px 6px; border-radius:6px;
      border:1px solid var(--border); background:#1f2937; color:var(--text); line-height:1.2;
    }
    .btn-mini.accent { border-color:var(--accent); }
    .btn-mini.danger { border-color:var(--danger); color:#fecaca; }

    /* Modal com rolagem (quando muitos colaboradores) */
    .modal-backdrop { position:fixed; inset:0; background:rgba(0,0,0,.55); display:none; align-items:center; justify-content:center; z-index:50; }
    .modal-content {
      background:#111827; border:1px solid #374151; border-radius:8px;
      padding:16px; width:95%; max-width:720px; max-height:80vh; overflow-y:auto;
    }
    .modal-title { margin:0 0 8px; }
    .modal-actions { display:flex; justify-content:flex-end; gap:8px; margin-top:12px; }
  </style>
</head>
<body>
  <header>
    <div class="left">
      <strong>GestÃ£o de FÃ©rias e Folgas (MEF L9C)</strong>
      <label>Ano: <select id="yearSelect"></select></label>
      <button id="reloadBtn">Recarregar</button>
      <button id="toggleWeeklyBtn" class="accent">VisÃ£o semanal</button>
    </div>
    <div class="right">
      <!-- Direcionador para ediÃ§Ã£o de colaboradores -->
      ./colaboradores.htmlEditar colaboradores â†’</a>
      <button id="openConfigEscalasBtn">Configurar escalas</button>
    </div>
  </header>

  <main>
    <div class="legend"><span>ðŸŸ¢ FÃ©rias</span><span>ðŸŸ  Folga</span></div>
    <div class="grid-container" id="yearGrid"></div>

    <section class="weekly" id="weeklySection">
      <div class="weekly-header">
        <div><strong>Semana:</strong> <span id="weeklyRange"></span></div>
        <div class="tools">
          <button id="openVacationModalBtn">Adicionar fÃ©rias</button>
        </div>
      </div>
      <div class="week-days" id="weekDays"></div>
    </section>
  </main>

  <!-- Modal com rolagem -->
  <div id="modalBackdrop" class="modal-backdrop">
    <div class="modal-content">
      <h3 id="modalTitle" class="modal-title">AÃ§Ã£o</h3>
      <div id="modalBody"></div>
      <div class="modal-actions">
        <button id="modalCancel">Cancelar</button>
        <button id="modalOk" class="accent">Confirmar</button>
      </div>
    </div>
  </div>

  <script>
    /***********************************************************
     * MOCKS (dados locais para teste)
     ***********************************************************/
    const ESCALAS_TRABALHO = {
      ALT_A: "2x2x3x2x2x3_A",
      ALT_B: "2x2x3x2x2x3_B",
      DOM_QUI: "DOM-QUI"
    };
    let CYCLE_ANCHOR_ISO = "2025-01-01"; // Ã¢ncora do ciclo 2x2x3x2x2x3

    let COLABS = [
      { id: 1, nome: "ALVARO GUILHERME", re: "59-00253", numero: "20596", equipe: "MEF L9C", escala: "JOELSON LEMES", escala_trabalho: ESCALAS_TRABALHO.ALT_A },
      { id: 2, nome: "ANDRE LUIZ FERREIRA", re: "59-01819", numero: "20612", equipe: "MEF L9C", escala: "LUANA CERINO", escala_trabalho: ESCALAS_TRABALHO.ALT_A },
      { id: 4, nome: "BRUNO NASCIMENTO DE JESUS", re: "59-00690", numero: "20633", equipe: "MEF L9C", escala: "JOELSON LEMES", escala_trabalho: ESCALAS_TRABALHO.ALT_A },
      { id: 7, nome: "EVANDRO ARTIOLI FELIX", re: "59-03048", numero: "22578", equipe: "MEF L9C", escala: "JOELSON LEMES", escala_trabalho: ESCALAS_TRABALHO.ALT_B },
      { id: 9, nome: "JEFFERSON GEORGE", re: "59-03155", numero: "22645", equipe: "MEF L9C", escala: "LUANA CERINO", escala_trabalho: ESCALAS_TRABALHO.ALT_B },
      { id: 15, nome: "MARCELO MORAIS DA SILVA", re: "59-00425", numero: "20966", equipe: "MEF L9C", escala: "JOELSON LEMES", escala_trabalho: ESCALAS_TRABALHO.DOM_QUI },
      { id: 23, nome: "WESLEY DE ANDRADE ALMEIDA", re: "59-00164", numero: "21165", equipe: "MEF L9C", escala: "JOELSON LEMES", escala_trabalho: ESCALAS_TRABALHO.DOM_QUI }
    ];

    let VACATIONS = [
      { id: 1001, colaboradorId: 4, start: "2026-01-08", end: "2026-01-21" },
      { id: 1002, colaboradorId: 15, start: "2026-03-14", end: "2026-03-27" },
      { id: 1003, colaboradorId: 9, start: "2026-07-01", end: "2026-07-20" },
    ];
    let FOLGAS = [
      { id: 2001, colaboradorId: 4, date: "2026-01-10" },
      { id: 2002, colaboradorId: 4, date: "2026-01-11" },
      { id: 2003, colaboradorId: 15, date: "2026-03-16" },
    ];

    /***********************************************************
     * Utils de datas e escalas
     ***********************************************************/
    const WEEK_START = 1; // Monday
    const fmtISO = (d) => d.toISOString().slice(0,10);
    const addDays = (d,n) => { const x=new Date(d); x.setDate(x.getDate()+n); return x; };
    const clampMid = (d)=>{ const x=new Date(d); x.setHours(0,0,0,0); return x; };
    const rangesOverlap=(aStart,aEnd,bStart,bEnd)=> (aStart<=bEnd)&&(bStart<=aEnd);

    function getWeeksOfYear(year){
      const jan1=clampMid(new Date(year,0,1));
      const dec31=clampMid(new Date(year,11,31));
      let firstMonday=clampMid(jan1);
      const day=firstMonday.getDay();
      const delta=(day===0)?1:(day>WEEK_START?(7-(day-WEEK_START)):(WEEK_START-day));
      firstMonday=addDays(firstMonday,delta);
      const weeks=[]; let start=firstMonday;
      while(start<=dec31){ const end=addDays(start,6); weeks.push({start:fmtISO(start), end:fmtISO(end)}); start=addDays(start,7); }
      return weeks;
    }

    const ALT_A_WORK_IDX = new Set([0,1, 4,5,6, 9,10]);
    const ALT_B_WORK_IDX = new Set([2,3, 7,8, 11,12,13]);
    function cycleIndex(dateISO) {
      const anchor = clampMid(new Date(CYCLE_ANCHOR_ISO));
      const d = clampMid(new Date(dateISO));
      const diffDays = Math.floor((d - anchor) / 86400000);
      const mod = ((diffDays % 14) + 14) % 14;
      return mod;
    }
    function isScheduled(dateISO, escalaTrabalho) {
      const dow = new Date(dateISO).getDay();
      if (escalaTrabalho === ESCALAS_TRABALHO.DOM_QUI) return dow >= 0 && dow <= 4;
      const idx = cycleIndex(dateISO);
      if (escalaTrabalho === ESCALAS_TRABALHO.ALT_A) return ALT_A_WORK_IDX.has(idx);
      if (escalaTrabalho === ESCALAS_TRABALHO.ALT_B) return ALT_B_WORK_IDX.has(idx);
      return false;
    }

    /***********************************************************
     * Estado
     ***********************************************************/
    const state = {
      year: new Date().getFullYear(),
      weeks: [],
      collaborators: [],
      vacations: [],
      folgas: [],
      selectedWeek: null
    };

    /***********************************************************
     * DOM refs
     ***********************************************************/
    const yearSelect = document.getElementById('yearSelect');
    const yearGrid = document.getElementById('yearGrid');
    const weeklySection = document.getElementById('weeklySection');
    const weeklyRange = document.getElementById('weeklyRange');
    const weekDays = document.getElementById('weekDays');
    const reloadBtn = document.getElementById('reloadBtn');
    const toggleWeeklyBtn = document.getElementById('toggleWeeklyBtn');
    const openConfigEscalasBtn = document.getElementById('openConfigEscalasBtn');
    const backdrop = document.getElementById('modalBackdrop');
    const modalTitle = document.getElementById('modalTitle');
    const modalBody = document.getElementById('modalBody');
    const modalOk = document.getElementById('modalOk');
    const modalCancel = document.getElementById('modalCancel');

    /***********************************************************
     * InicializaÃ§Ã£o
     ***********************************************************/
    function initYearSelect(){
      const y = new Date().getFullYear();
      const years = [y - 1, y, y + 1, y + 2];
      yearSelect.innerHTML = '';
      years.forEach(yy => {
        const opt = document.createElement('option');
        opt.value = yy;
        opt.textContent = String(yy);
        yearSelect.appendChild(opt);
      });
      yearSelect.value = state.year;
      yearSelect.onchange = async () => { state.year = Number(yearSelect.value); await loadData(); };
    }

    async function loadData() {
      state.weeks = getWeeksOfYear(state.year);
      state.collaborators = COLABS.slice();
      state.vacations = VACATIONS.filter(v => new Date(v.start).getFullYear() === Number(state.year));
      renderYearView();
      if (state.selectedWeek) renderWeeklyView();
    }

    /***********************************************************
     * VisÃ£o anual
     ***********************************************************/
    function renderYearView(){
      const weeks=state.weeks, colabs=state.collaborators;
      const table=document.createElement('table'), thead=document.createElement('thead'), tbody=document.createElement('tbody');

      const trh=document.createElement('tr');
      const thName=document.createElement('th'); thName.className='name-col'; thName.textContent='Colaborador'; trh.appendChild(thName);
      weeks.forEach((w,idx)=>{
        const th=document.createElement('th'); th.className='week-col';
        th.innerHTML=`<div>S${String(idx+1).padStart(2,'0')}</div><div class="week-header">${w.start} â†’ ${w.end}</div>`;
        trh.appendChild(th);
      });
      thead.appendChild(trh);

      colabs.forEach(col=>{
        const tr=document.createElement('tr');
        const th=document.createElement('th'); th.className='name-col'; th.textContent=col.nome; tr.appendChild(th);
        weeks.forEach((w,idx)=>{
          const td=document.createElement('td'); td.className='week-col'; td.title=`${col.nome} / S${idx+1} (${w.start} a ${w.end})`;
          const hasVacation = state.vacations.some(v => v.colaboradorId===col.id && rangesOverlap(v.start,v.end,w.start,w.end));
          if(hasVacation) td.classList.add('cell-vac');
          td.onclick=()=>{ state.selectedWeek={...w, idx}; weeklySection.classList.add('active'); weeklyRange.textContent=`${w.start} â†’ ${w.end} (S${idx+1})`; loadWeeklyFolgas(w.start,w.end); };
          tr.appendChild(td);
        });
        tbody.appendChild(tr);
      });

      table.appendChild(thead); table.appendChild(tbody);
      yearGrid.innerHTML=''; yearGrid.appendChild(table);
    }

    /***********************************************************
     * Semana
     ***********************************************************/
    async function loadWeeklyFolgas(start, end){
      const s = new Date(start), e = new Date(end);
      state.folgas = FOLGAS.filter(f => { const d=new Date(f.date); return d>=s && d<=e; });
      renderWeeklyView();
    }

    // Auxiliar para remover fÃ©rias que intersectam um dia
    function removeVacationFor(colaboradorId, dayISO) {
      const idx = state.vacations.findIndex(v => v.colaboradorId === colaboradorId && rangesOverlap(v.start, v.end, dayISO, dayISO));
      if (idx >= 0) {
        const id = state.vacations[idx].id;
        // remove do mock global e do estado
        VACATIONS = VACATIONS.filter(v => v.id !== id);
        state.vacations.splice(idx, 1);
      }
    }

    function renderWeeklyView(){
      if(!state.selectedWeek) return;
      const startDate=new Date(state.selectedWeek.start);
      const days=Array.from({ length:7 }, (_,i)=> addDays(startDate,i));
      weekDays.innerHTML='';

      days.forEach(d=>{
        const dayISO = fmtISO(d);
        const card=document.createElement('div'); card.className='day-card';
        card.innerHTML=`<h4>${d.toLocaleDateString('pt-BR',{weekday:'short', day:'2-digit', month:'2-digit'})}</h4>`;

        const metrics={ escalados:0, ferias:0, folgas:0, disponiveis:0, porEscala:{ ALT_A:0, ALT_B:0, DOM_QUI:0 } };
        const scheduledList=[];

        state.collaborators.forEach(col=>{
          const esc = col.escala_trabalho || ESCALAS_TRABALHO.DOM_QUI;
          const scheduled = isScheduled(dayISO, esc);
          const onVacation = state.vacations.some(v => v.colaboradorId===col.id && rangesOverlap(v.start,v.end,dayISO,dayISO));
          const folgaRec = state.folgas.find(f => f.colaboradorId===col.id && f.date===dayISO);
          const hasFolga = !!folgaRec;

          if (scheduled) {
            metrics.escalados++;
            if (esc===ESCALAS_TRABALHO.ALT_A) metrics.porEscala.ALT_A++; else if (esc===ESCALAS_TRABALHO.ALT_B) metrics.porEscala.ALT_B++; else metrics.porEscala.DOM_QUI++;
            if (onVacation) metrics.ferias++; else if (hasFolga) metrics.folgas++; else metrics.disponiveis++;
            scheduledList.push({ col, onVacation, hasFolga, folgaRec, esc });
          }
        });

        const m=document.createElement('div'); m.className='day-metrics';
        m.innerHTML=`
          <div class="row"><span>Total escalados</span><strong>${metrics.escalados}</strong></div>
          <div class="row"><span>Em fÃ©rias</span><strong>${metrics.ferias}</strong></div>
          <div class="row"><span>Em folga</span><strong>${metrics.folgas}</strong></div>
          <div class="row"><span>DisponÃ­veis</span><strong>${metrics.disponiveis}</strong></div>
          <div class="row"><span>ALT A</span><strong>${metrics.porEscala.ALT_A}</strong></div>
          <div class="row"><span>ALT B</span><strong>${metrics.porEscala.ALT_B}</strong></div>
          <div class="row"><span>Domâ€‘Qui</span><strong>${metrics.porEscala.DOM_QUI}</strong></div>`;
        card.appendChild(m);

        scheduledList.sort((a,b)=> a.col.nome.localeCompare(b.col.nome)).forEach(item=>{
          const div=document.createElement('div'); div.className='person';
          const left=document.createElement('div'); left.textContent=`${item.col.nome} (${item.esc})`;
          const right=document.createElement('div'); right.style.display='flex'; right.style.gap='6px'; right.style.alignItems='center';

          const badge=document.createElement('span');
          if(item.onVacation){ badge.className='badge vac'; badge.textContent='FÃ©rias'; }
          else if(item.hasFolga){ badge.className='badge folga'; badge.textContent='Folga'; }
          else { badge.className='badge'; badge.textContent='Disp.'; }
          right.appendChild(badge);

          // BotÃ£o toggle folga (compacto e proporcional ao badge)
          const btnToggleFolga=document.createElement('button');
          btnToggleFolga.className='btn-mini';
          if (item.onVacation) {
            btnToggleFolga.disabled = true;
            btnToggleFolga.title = 'Em fÃ©rias';
            btnToggleFolga.textContent = 'â€”';
          } else if (item.hasFolga) {
            btnToggleFolga.classList.add('danger');
            btnToggleFolga.textContent = 'Remover folga';
            btnToggleFolga.onclick = () => {
              FOLGAS = FOLGAS.filter(f => f.id !== item.folgaRec.id);
              state.folgas = state.folgas.filter(f => f.id !== item.folgaRec.id);
              renderWeeklyView();
            };
          } else {
            btnToggleFolga.classList.add('accent');
            btnToggleFolga.textContent = '+ Folga';
            btnToggleFolga.onclick = () => {
              const newId = Math.floor(Math.random()*1e6);
              const novo = { id: newId, colaboradorId: item.col.id, date: dayISO };
              FOLGAS.push(novo);
              state.folgas.push(novo);
              renderWeeklyView();
            };
          }
          right.appendChild(btnToggleFolga);

          // NOVO: BotÃ£o "Remover fÃ©rias" quando estiver em fÃ©rias nesse dia
          if (item.onVacation) {
            const btnRemVac = document.createElement('button');
            btnRemVac.className = 'btn-mini danger';
            btnRemVac.textContent = 'Remover fÃ©rias';
            btnRemVac.title = 'Remove o perÃ­odo de fÃ©rias que inclui este dia';
            btnRemVac.onclick = () => { removeVacationFor(item.col.id, dayISO); renderYearView(); renderWeeklyView(); };
            right.appendChild(btnRemVac);
          }

          div.appendChild(left); div.appendChild(right);
          card.appendChild(div);
        });

        weekDays.appendChild(card);
      });
    }

    /***********************************************************
     * Modais
     ***********************************************************/
    let modalCtx=null;

    function openVacationModal(){
      modalCtx = { type: 'vac' };
      modalTitle.textContent = 'Adicionar fÃ©rias';
      modalBody.innerHTML = `
        <div style="display:grid; gap:8px;">
          <label>Colaborador:
            <select id="vacCol">
              ${state.collaborators.map(c=>`<option value="${c.id}">${c.nome}</option>`).join('')}
            </select>
          </label>

          <label>InÃ­cio:
            <input type="date" id="vacStart" value="${state.selectedWeek?.start||''}">
          </label>

          <label>TÃ©rmino:
            <input type="date" id="vacEnd" value="${state.selectedWeek?.end||''}">
          </label>

          <div style="display:flex; gap:8px; align-items:center;">
            <span style="color:var(--muted); font-size:12px;">Atalhos:</span>
            <button id="add20Btn" class="btn-mini accent" type="button">+20 dias</button>
            <button id="add30Btn" class="btn-mini accent" type="button">+30 dias</button>
          </div>
        </div>
      `;
      backdrop.style.display='flex';

      const vacStartEl = () => document.getElementById('vacStart');
      const vacEndEl   = () => document.getElementById('vacEnd');
      const addDaysToEnd = (n) => {
        const startISO = vacStartEl().value;
        if (!startISO) return alert('Defina a data de inÃ­cio primeiro.');
        const start = new Date(startISO);
        const end   = new Date(start.getTime() + (n-1) * 86400000); // perÃ­odo de n dias
        vacEndEl().value = end.toISOString().slice(0,10);
      };
      document.getElementById('add20Btn').onclick = () => addDaysToEnd(20);
      document.getElementById('add30Btn').onclick = () => addDaysToEnd(30);

      modalOk.onclick = () => {
        const colaboradorId=Number(document.getElementById('vacCol').value);
        const startISO=document.getElementById('vacStart').value;
        const endISO=document.getElementById('vacEnd').value;
        if(!startISO || !endISO) return alert('Informe datas vÃ¡lidas.');
        const id = Math.floor(Math.random()*1e6);
        VACATIONS.push({ id, colaboradorId, start: startISO, end: endISO });
        state.vacations.push({ id, colaboradorId, start: startISO, end: endISO });
        renderYearView(); renderWeeklyView(); closeModal();
      };
    }

    function openConfigEscalasModal(){
      modalCtx = { type: 'config' };
      modalTitle.textContent = 'Configurar escalas';
      modalBody.innerHTML = `
        <div style="display:grid; gap:10px;">
          <label>Ã‚ncora do ciclo (2x2x3x2x2x3):
            <input type="date" id="anchorInput" value="${CYCLE_ANCHOR_ISO}">
          </label>
          <hr style="border-color:#374151; margin:0;">
          ${state.collaborators.map(c=>`
            <div style="display:grid; grid-template-columns: 1fr 220px; gap:8px; align-items:center;">
              <div>${c.nome}</div>
              <select data-col-id="${c.id}" class="escSelect">
                <option value="${ESCALAS_TRABALHO.ALT_A}" ${c.escala_trabalho===ESCALAS_TRABALHO.ALT_A?'selected':''}>ALT A (2x2x3x2x2x3)</option>
                <option value="${ESCALAS_TRABALHO.ALT_B}" ${c.escala_trabalho===ESCALAS_TRABALHO.ALT_B?'selected':''}>ALT B (2x2x3x2x2x3)</option>
                <option value="${ESCALAS_TRABALHO.DOM_QUI}" ${c.escala_trabalho===ESCALAS_TRABALHO.DOM_QUI?'selected':''}>Domâ€‘Qui</option>
              </select>
            </div>`).join('')}
        </div>
      `;
      backdrop.style.display='flex';

      modalOk.onclick = () => {
        const anchorInput = document.getElementById('anchorInput').value;
        if (anchorInput) CYCLE_ANCHOR_ISO = anchorInput;
        const selects = [...modalBody.querySelectorAll('.escSelect')];
        selects.forEach(s => {
          const id = Number(s.getAttribute('data-col-id'));
          const esc = s.value;
          const i = COLABS.findIndex(c => c.id===id);
          if (i>=0) { COLABS[i].escala_trabalho = esc; }
        });
        loadData(); closeModal();
      };
    }

    function closeModal(){ backdrop.style.display='none'; modalCtx=null; modalOk.onclick=null; }
    modalCancel.onclick = closeModal;

    document.getElementById('openVacationModalBtn').onclick = openVacationModal;
    openConfigEscalasBtn.onclick = openConfigEscalasModal;

    /***********************************************************
     * Eventos gerais
     ***********************************************************/
    reloadBtn.onclick = loadData;
    toggleWeeklyBtn.onclick = () => weeklySection.classList.toggle('active');

    // Boot
    initYearSelect();
    loadData();
  </script>
</body>
</html>
x'